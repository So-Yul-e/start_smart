# 브랜드 데이터 정규화 가이드

## 문제점

API에서 가져온 브랜드 데이터는 문자열로 올 수 있습니다:
```json
{
  "id": "brand_1769853042532",
  "name": "던킨도너츠",
  "initialInvestment": "200000000",  // 문자열
  "monthlyRoyalty": "3.00",          // 문자열
  "avgDailySales": 200                // 숫자
}
```

하지만 프론트엔드에서는 숫자 타입을 기대합니다.

## 해결 방법

브랜드 선택 시 데이터를 정규화하여 저장:

```javascript
var normalizedBrand = {
  id: brand.id,
  name: brand.name,
  position: brand.position,
  initialInvestment: typeof brand.initialInvestment === 'string' 
    ? parseInt(brand.initialInvestment) 
    : brand.initialInvestment,
  monthlyRoyalty: typeof brand.monthlyRoyalty === 'string' 
    ? parseFloat(brand.monthlyRoyalty) 
    : brand.monthlyRoyalty,
  avgDailySales: typeof brand.avgDailySales === 'string' 
    ? parseInt(brand.avgDailySales) 
    : brand.avgDailySales
};
```

## 확인 방법

1. 브라우저 콘솔에서 확인:
   - `[브랜드 선택] 선택된 브랜드:` - 원본 데이터
   - `[브랜드 선택] 정규화된 브랜드:` - 변환된 데이터

2. 분석 실행 시 확인:
   - `[분석 실행] 사용할 브랜드 ID:` - 실제 DB의 브랜드 ID

3. 서버 콘솔 확인:
   - `[분석 요청] 요청 본문:` - 보내는 데이터 확인
   - `[createAnalysis] 입력 데이터:` - DB 저장 전 데이터 확인
