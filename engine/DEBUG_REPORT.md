# Engine í´ë” ë””ë²„ê·¸ ë¦¬í¬íŠ¸

**ìƒì„±ì¼**: 2024ë…„ í˜„ì¬  
**ëª©ì **: engine í´ë” ë‚´ í˜„ì¬ê¹Œì§€ ì‘ì—… ë‚´ìš© ë””ë²„ê·¸ ë° ë‚¨ì€ ì‘ì—… í™•ì¸

---

## ğŸ“Š ì „ì²´ ìƒíƒœ ìš”ì•½

### âœ… ì™„ë£Œëœ ì‘ì—… (High Priority - 100%)

#### Phase 1: Finance ê³„ì‚° ì—”ì§„
- âœ… **expectedDailySales Fallback ê·œì¹™ êµ¬í˜„**
  - íŒŒì¼: `engine/finance/calculator.js`
  - ìš°ì„ ìˆœìœ„: `market.expectedDailySales` â†’ `brand.defaults.expectedDailySales` â†’ `targetDailySales`
  - ìµœí›„ fallback ì‹œ `gapWarning: true` í”Œë˜ê·¸ ì¶”ê°€

- âœ… **paybackMonths null ì²˜ë¦¬**
  - `monthlyProfit <= 0`ì¼ ë•Œ `Infinity` ëŒ€ì‹  `null` ë°˜í™˜
  - ë¯¼ê°ë„ ë¶„ì„ì—ì„œë„ ë™ì¼ ì ìš©

- âœ… **breakEvenDailySales null ì²˜ë¦¬**
  - ì—£ì§€ ì¼€ì´ìŠ¤ ë°©ì–´ (`avgPrice = 0`, `totalCosts = 0`)

- âœ… **ì…ë ¥ ê²€ì¦ ê°•í™”**
  - `brand.defaults` í•„ìˆ˜ í•„ë“œ ê²€ì¦
  - `conditions` í•„ìˆ˜ í•„ë“œ ê²€ì¦
  - `targetDailySales` ê²€ì¦

- âœ… **ì‹œë‚˜ë¦¬ì˜¤ í…Œì´ë¸” expected ìœ ì§€**
  - ì‹œë‚˜ë¦¬ì˜¤ ê³„ì‚° ì‹œ `market.expectedDailySales`ëŠ” ì›ë˜ ê°’ ìœ ì§€
  - ë³€ê²½ë˜ëŠ” ê²ƒì€ `targetDailySales`ë§Œ

#### Phase 2: Decision íŒë‹¨ ì—”ì§„
- âœ… **riskFactors(ë ˆê±°ì‹œ) + riskCards(ì‹ ê·œ) ë³‘í–‰ êµ¬í˜„**
  - Backward Compatibility ë³´ì¥
  - `riskCards`: êµ¬ì¡°í™”ëœ ê°ì²´ ë°°ì—´ (ì‹ ê·œ)
  - `riskFactors`: ë¬¸ìì—´ ë°°ì—´ (ë ˆê±°ì‹œ, ìë™ ìƒì„±)

- âœ… **ì ìˆ˜ ê³„ì‚° NaN/Infinity ì²˜ë¦¬ ê°•í™”**
  - `paybackMonths` null/Infinity ì²˜ë¦¬
  - `determineSignal` null ì²´í¬ ì¶”ê°€
  - `estimateSurvivalMonths` null/Infinity ì²˜ë¦¬ ê°•í™”

- âœ… **Score Breakdown ì¶”ê°€**
  - ê° í•­ëª©ë³„ ì ìˆ˜ (payback, profitability, gap, sensitivity, fixedCost, dscr, market, roadview)
  - ì¶œë ¥ì— `breakdown` ê°ì²´ í¬í•¨

- âœ… **Survival Months ë³´ë„ˆìŠ¤ ê·œì¹™**
  - payback < 18ê°œì›” ì‹œ +6ê°œì›” ë³´ë„ˆìŠ¤

- âœ… **determineSignal ê°œì„ **
  - GAP/ë¯¼ê°ë„/ê³ ì •ë¹„ ë°˜ì˜
  - ë¸Œëœë“œ ê°ì†Œìœ¨ í•˜ë“œì»· ì¶”ê°€
  - DSCR í•˜ë“œì»· ì¶”ê°€

#### Phase 3: ê²€ì¦ ë° ë¬¸ì„œí™”
- âœ… **Finance ì¶œë ¥ ê²€ì¦ í•¨ìˆ˜**
  - íŒŒì¼: `engine/finance/validator.js`
  - `validateFinanceOutput()` í•¨ìˆ˜ êµ¬í˜„
  - `finance/index.js`ì— í†µí•©

- âœ… **Decision ì¶œë ¥ ê²€ì¦ í•¨ìˆ˜**
  - íŒŒì¼: `engine/decision/validator.js`
  - `validateDecisionOutput()` í•¨ìˆ˜ êµ¬í˜„
  - `decision/index.js`ì— í†µí•©

- âœ… **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±**
  - íŒŒì¼: `engine/finance/calculator.test.js` âœ…
  - íŒŒì¼: `engine/decision/scorer.test.js` âœ…
  - í…ŒìŠ¤íŠ¸ ë²”ìœ„: ì •ìƒ ì¼€ì´ìŠ¤, ì—£ì§€ ì¼€ì´ìŠ¤, Breakdown, Survival months ë³´ë„ˆìŠ¤

- âœ… **API ë¬¸ì„œ ì‘ì„±**
  - íŒŒì¼: `engine/API_DOCUMENTATION.md` âœ…
  - Finance API, Decision API, Breakdown ì‚¬ìš©ë²•, ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ë²• í¬í•¨

- âœ… **ë°±ì—”ë“œ í†µí•© ê°€ì´ë“œ ì‘ì„±**
  - íŒŒì¼: `engine/BACKEND_INTEGRATION_GUIDE.md` âœ…
  - DB â†’ data_local Fallback ì„¤ëª…
  - ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ë²•
  - Breakdown í™œìš© ë°©ë²•

#### Phase 4: ë°ì´í„° ì‹œìŠ¤í…œ
- âœ… **ë¸Œëœë“œ ë°ì´í„° ì‹œìŠ¤í…œ êµ¬ì¶•**
  - 12ê°œ ë¸Œëœë“œ ë°ì´í„°
  - DB â†’ data_local fallback êµ¬í˜„

- âœ… **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**
  - MySQL/PostgreSQL ìŠ¤í‚¤ë§ˆ íŒŒì¼ ìƒì„±
  - `engine/data_local/dbLoader.js` êµ¬í˜„

---

## âš ï¸ í™•ì¸ í•„ìš” í•­ëª©

### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í™•ì¸
- âœ… í…ŒìŠ¤íŠ¸ íŒŒì¼ ì¡´ì¬: `calculator.test.js`, `scorer.test.js`
- âš ï¸ **Jest í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ í•„ìš”**
  - í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ Jest í˜•ì‹ìœ¼ë¡œ ì‘ì„±ë¨ (`describe`, `test`, `expect`)
  - Jest ì„¤ì¹˜ í•„ìš”: `npm install --save-dev jest`
  - í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´: `npm test` ë˜ëŠ” `npx jest`
  - í˜„ì¬ ìƒíƒœ: Jest ë¯¸ì„¤ì¹˜ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë¶ˆê°€

### 2. í†µí•© í…ŒìŠ¤íŠ¸ í™•ì¥
- âœ… ê¸°ë³¸ fixture ì¡´ì¬: `fixtures/mega-gangnam.js`
- âš ï¸ **ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ì¶”ê°€ í•„ìš”**
  - ì €ê°€í˜• ë¸Œëœë“œ + ì €ë ´í•œ ì§€ì—­
  - í”„ë¦¬ë¯¸ì—„ ë¸Œëœë“œ + ê°•ë‚¨
  - ì ì ì‹œë‚˜ë¦¬ì˜¤
  - ìµœì  ì¡°ê±´ ì‹œë‚˜ë¦¬ì˜¤
  - ëŒ€ì¶œ í¬í•¨ ì‹œë‚˜ë¦¬ì˜¤

### 3. ì½”ë“œ í’ˆì§ˆ ê²€ì¦
- âœ… ëª¨ë“ˆ ë¡œë“œ í…ŒìŠ¤íŠ¸: **í†µê³¼** âœ…
  ```bash
  âœ… Finance ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ
  âœ… Decision ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ
  ```
- âš ï¸ **ì‹¤ì œ ê³„ì‚° ë¡œì§ ê²€ì¦ í•„ìš”**
  - ì‹¤ì œ ì…ë ¥ ë°ì´í„°ë¡œ Finance ê³„ì‚° í…ŒìŠ¤íŠ¸
  - ì‹¤ì œ ì…ë ¥ ë°ì´í„°ë¡œ Decision íŒë‹¨ í…ŒìŠ¤íŠ¸

---

## ğŸ” ë°œê²¬ëœ ì ì¬ì  ì´ìŠˆ

### 1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìƒíƒœ ë¶ˆëª…í™•
- **ë¬¸ì œ**: í…ŒìŠ¤íŠ¸ íŒŒì¼ì€ ì¡´ì¬í•˜ì§€ë§Œ ì‹¤ì œ ì‹¤í–‰ ì—¬ë¶€ í™•ì¸ ì•ˆ ë¨
- **ì˜í–¥**: ì½”ë“œ ë³€ê²½ ì‹œ íšŒê·€ í…ŒìŠ¤íŠ¸ ë¶ˆê°€ëŠ¥
- **ê¶Œì¥ ì¡°ì¹˜**: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ ì—¬ë¶€ í™•ì¸

### 2. ë¬¸ì„œ ì¼ê´€ì„±
- **ë¬¸ì œ**: ì—¬ëŸ¬ ë¬¸ì„œì— ë™ì¼í•œ ë‚´ìš©ì´ ì¤‘ë³µë˜ì–´ ìˆìŒ
  - `REMAINING_TASKS.md`
  - `FINAL_TODO_CHECKLIST.md`
  - `COMPLETE_TODO_CHECKLIST.md`
  - `TODO_REVIEW.md`
- **ì˜í–¥**: ë¬¸ì„œ ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€
- **ê¶Œì¥ ì¡°ì¹˜**: ë‹¨ì¼ ë¬¸ì„œë¡œ í†µí•© ë˜ëŠ” ëª…í™•í•œ ì—­í•  ë¶„ë¦¬

### 3. ì²´í¬ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•„ìš”
- **ë¬¸ì œ**: `DEVELOPMENT_CHECKLIST.md`ì— ì™„ë£Œëœ í•­ëª©ì´ ì²´í¬ë˜ì§€ ì•ŠìŒ
- **ì˜í–¥**: ì§„í–‰ ìƒí™© íŒŒì•… ì–´ë ¤ì›€
- **ê¶Œì¥ ì¡°ì¹˜**: ì™„ë£Œëœ í•­ëª© ì²´í¬ í‘œì‹œ

---

## ğŸ“‹ ë‚¨ì€ ì‘ì—… (ìš°ì„ ìˆœìœ„ë³„)

### ğŸ”´ High Priority

#### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²€ì¦ âš ï¸ **ì¦‰ì‹œ í•„ìš”**
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ëª…ë ¹ì–´ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸ í†µê³¼ ì—¬ë¶€ í™•ì¸
- [ ] ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ ìˆ˜ì •
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í™•ì¸

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì‹œê°„

#### 2. ì‹¤ì œ ê³„ì‚° ë¡œì§ ê²€ì¦ âš ï¸ **ì¦‰ì‹œ í•„ìš”**
- [ ] ì‹¤ì œ ì…ë ¥ ë°ì´í„°ë¡œ Finance ê³„ì‚° í…ŒìŠ¤íŠ¸
- [ ] ì‹¤ì œ ì…ë ¥ ë°ì´í„°ë¡œ Decision íŒë‹¨ í…ŒìŠ¤íŠ¸
- [ ] ì¶œë ¥ í˜•ì‹ ê²€ì¦
- [ ] ì—£ì§€ ì¼€ì´ìŠ¤ ê²€ì¦

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„

### ğŸŸ¡ Medium Priority

#### 3. í†µí•© í…ŒìŠ¤íŠ¸ í™•ì¥
- [ ] ë‹¤ì–‘í•œ ë¸Œëœë“œ/ì§€ì—­/ì¡°ê±´ ì¡°í•© í…ŒìŠ¤íŠ¸
- [ ] `fixtures/integration-scenarios.js` ìƒì„± ë˜ëŠ” í™•ì¥
- [ ] ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„

#### 4. ë¬¸ì„œ ì •ë¦¬
- [ ] ì¤‘ë³µ ë¬¸ì„œ í†µí•© ë˜ëŠ” ì—­í•  ë¶„ë¦¬
- [ ] `DEVELOPMENT_CHECKLIST.md` ì—…ë°ì´íŠ¸
- [ ] ìµœì‹  ìƒíƒœ ë°˜ì˜

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì‹œê°„

### ğŸŸ¢ Low Priority

#### 5. ì„±ëŠ¥ ìµœì í™”
- [ ] ê³„ì‚° ì„±ëŠ¥ ì¸¡ì •
- [ ] ë³‘ëª© ì§€ì  íŒŒì•… ë° ìµœì í™”

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-4ì‹œê°„

#### 6. ì¶”ê°€ ê¸°ëŠ¥
- [ ] PDF íŒŒì‹± ìë™í™” (ì„ íƒì )
- [ ] ë¸Œëœë“œ ë°ì´í„° ì—…ë°ì´íŠ¸ ìë™í™”

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4-8ì‹œê°„

---

## ğŸ¯ ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì‘ì—…

### 1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ í™˜ê²½ ì„¤ì • ë° ì‹¤í–‰ (1-2ì‹œê°„)
```bash
# Jest ì„¤ì¹˜
cd engine
npm install --save-dev jest

# package.jsonì— test ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ í•„ìš”
# "scripts": { "test": "jest" }

# Finance í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test finance/calculator.test.js

# Decision í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test decision/scorer.test.js

# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test
```

### 2ë‹¨ê³„: ì‹¤ì œ ê³„ì‚° ë¡œì§ ê²€ì¦ (2-3ì‹œê°„)
```bash
# Fixture ì‹¤í–‰
node fixtures/mega-gangnam.js

# ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
node fixtures/integration-scenarios.js  # ìƒì„± í•„ìš”
```

### 3ë‹¨ê³„: ë¬¸ì„œ ì •ë¦¬ (1-2ì‹œê°„)
- `DEVELOPMENT_CHECKLIST.md` ì—…ë°ì´íŠ¸
- ì¤‘ë³µ ë¬¸ì„œ ì •ë¦¬

---

## ğŸ“Š ì§„í–‰ë¥  ìš”ì•½

| í•­ëª© | ì™„ë£Œìœ¨ | ìƒíƒœ |
|------|--------|------|
| **High Priority êµ¬í˜„** | 100% | âœ… ì™„ë£Œ |
| **ê²€ì¦ í•¨ìˆ˜** | 100% | âœ… ì™„ë£Œ |
| **API ë¬¸ì„œ** | 100% | âœ… ì™„ë£Œ |
| **ë°±ì—”ë“œ í†µí•© ê°€ì´ë“œ** | 100% | âœ… ì™„ë£Œ |
| **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ íŒŒì¼** | 100% | âœ… ì™„ë£Œ |
| **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰** | ? | âš ï¸ í™•ì¸ í•„ìš” |
| **í†µí•© í…ŒìŠ¤íŠ¸ í™•ì¥** | 50% | âš ï¸ ë¶€ë¶„ ì™„ë£Œ |
| **ë¬¸ì„œ ì •ë¦¬** | 70% | âš ï¸ ê°œì„  í•„ìš” |

**ì „ì²´ ì§„í–‰ë¥ **: ì•½ **85%** (High Priority ê¸°ì¤€)

---

## âœ… ê²°ë¡ 

### ì™„ë£Œëœ ì£¼ìš” ì‘ì—…
1. âœ… Finance ê³„ì‚° ì—”ì§„ ì™„ì„± (Fallback, null ì²˜ë¦¬, ê²€ì¦)
2. âœ… Decision íŒë‹¨ ì—”ì§„ ì™„ì„± (Breakdown, Survival months, ë¦¬ìŠ¤í¬ ì¹´ë“œ)
3. âœ… ê²€ì¦ í•¨ìˆ˜ êµ¬í˜„
4. âœ… API ë¬¸ì„œ ë° ë°±ì—”ë“œ í†µí•© ê°€ì´ë“œ ì‘ì„±
5. âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±

### ì¦‰ì‹œ í•„ìš”í•œ ì‘ì—…
1. âš ï¸ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° í†µê³¼ ì—¬ë¶€ í™•ì¸** (ê°€ì¥ ì¤‘ìš”)
2. âš ï¸ **ì‹¤ì œ ê³„ì‚° ë¡œì§ ê²€ì¦**
3. âš ï¸ **í†µí•© í…ŒìŠ¤íŠ¸ í™•ì¥**

### ê¶Œì¥ ë‹¤ìŒ ë‹¨ê³„
1. í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²€ì¦ (1-2ì‹œê°„)
2. ì‹¤ì œ ê³„ì‚° ë¡œì§ ê²€ì¦ (2-3ì‹œê°„)
3. ë¬¸ì„œ ì •ë¦¬ (1-2ì‹œê°„)

---

## ğŸ“ ì°¸ê³  ë¬¸ì„œ

- `engine/ROLE.md`: ì—­í•  ì •ì˜ ë° ì…ì¶œë ¥ ìŠ¤í™
- `engine/API_DOCUMENTATION.md`: API ë¬¸ì„œ
- `engine/BACKEND_INTEGRATION_GUIDE.md`: ë°±ì—”ë“œ í†µí•© ê°€ì´ë“œ
- `engine/DEVELOPMENT_CHECKLIST.md`: ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸
- `engine/IMPLEMENTATION_SUMMARY.md`: êµ¬í˜„ ì™„ë£Œ ìš”ì•½

---

**ë¦¬í¬íŠ¸ ìƒì„±ì¼**: 2024ë…„ í˜„ì¬  
**ë‹¤ìŒ ì—…ë°ì´íŠ¸ ê¶Œì¥ì¼**: í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„
